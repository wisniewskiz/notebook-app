<%- layout ('layouts/boilerplate')%>
<div class="row my-5">
  <div class="notes__list col-8">
    <h1 class="display-1">Collected Notes</h1>
    <div class="row">
      <% for( let note of notes) { %>
      <div class="card col-4 my-2 mx-2 shadow border border-0">
        <div class="card-body d-flex flex-column justify-content-around ">
          <h5 class="card-title"><%= note.title %></h5>
          <h6 class="card-subtitle mb-2"><%= moment(note.uh6datedAt).format('MMM Do YYYY'); %></h6>
          <p class="card-text" style=" display: -webkit-box;
          -webkit-line-clamp: 5;
          -webkit-box-orient: vertical; 
          overflow: hidden"><%= note.body %></p>
          <div class="card__footer">
            <a href="/notes/<%= note._id %>">
                <button type="button" class="btn btn-primary "><span class="material-symbols-outlined align-middle me-2">
                  expand_content 
                  </span> See More</button>
            </a>
          </div>
        </div>
      </div>
      <% } %>
    </div>
  </div>
  <div class="notes__form col">
    <h1 class="display-1">Create New</h1>
    <form action="/notes" method="POST" class="needs-validation" novalidate>
      <fieldset class="form-floating mb-3">
          <input type="text" id="title" name="note[title]" class="form-control" required />
        <label for="title">Title</label>
      </fieldset>
      <fieldset class="form-floating mb-3">
          <textarea name="note[body]" id="body" class="form-control" style="height: 320px" required></textarea>
        <label for="body">Your Note</label>
      </fieldset>
      <button class="btn btn-success" type="submit">Add Note</button>
    </form>
  </div>
</div>

<script>
  (() => {
  'use strict'

  // Fetch all the forms we want to apply custom Bootstrap validation styles to
  const forms = document.querySelectorAll('.needs-validation')

  // Loop over them and prevent submission
  Array.from(forms).forEach(form => {
    form.addEventListener('submit', event => {
      if (!form.checkValidity()) {
        event.preventDefault()
        event.stopPropagation()
      }

      form.classList.add('was-validated')
    }, false)
  })
})()
</script>